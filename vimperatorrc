"3.8.3 (created: 2014/11/09 13:19:01)

set gui=nonavigation
set complete=stl
" broken with Tree Style Tabs, configure manually with user styles instead
" set tabnumbers

let g:smooziee_scroll_amount="100"
let g:smooziee_scroll_interval="10"

let mapleader=","

" Enable Linux-style tab switching (with Alt) on Windows
javascript <<EOF
if (navigator.appVersion.contains("Windows")) {
    for (i = 1; i < 9; i++) {
        let a = "<A-" + i + ">";
        let t = i + "gt";
        mappings.addUserMap([modes.NORMAL, modes.VISUAL], [a],
            "Go to tab " + i,
            function() {
                events.feedkeys(t, true, true);
          });
    }
    mappings.addUserMap([modes.NORMAL, modes.VISUAL], ["<A-9>"],
        "Go to last tab",
        function() {
            events.feedkeys("<C-9>", true, true);
      });
}
EOF

javascript <<EOF
function livestreamer(arg) {
    io.run("livestreamer", [buffer.URL, arg], false);
}
EOF

" This feature is "built-in", but we have to bind the mapping
set! browser.ctrlTab.previews=true
set! browser.ctrlTab.mostRecentlyUsed=true
javascript <<EOF
function openCtrlTab(reverse) {
    ctrlTab.open();
    if (reverse) {
        ctrlTab._selectedIndex = ctrlTab.tabPreviewCount - 1;
    }
}
EOF
autocmd VimperatorEnter .* map <C-Tab> :javascript openCtrlTab(false)<CR>
autocmd VimperatorEnter .* map <C-S-Tab> :javascript openCtrlTab(true);<CR>

cmap <C-i> <Nop>
cmap <C-o> <Nop>
cnoremap <C-b> <Left>
cnoremap <C-f> <Right>
cnoremap <C-n> <Down>
cnoremap <C-p> <Up>
cnoremap <A-b> <C-Left>
cnoremap <A-f> <C-Right>

" Insert current tab group name in command line (useful for buffer selection)
javascript <<EOF
mappings.addUserMap([modes.COMMAND_LINE], ["<A-e>"], "Insert tab group name",
    function () {
        let groupName =
            tabGroup.tabView.GroupItems.getActiveGroupItem().getTitle();
        commandline.command += groupName + ".";
        commandline.resetCompletions();
        commandline.triggerCallback(
            "change", commandline._currentExtendedMode, commandline.command);
    });
EOF

map v :set gui=invtabs<CR>
map x :multiplequit<CR>

map <Leader>t :tab 
map <Leader>w :window 
map <Leader>e :tabgroups 
map e :tabgroups add 
map E :tabgroups pushtab! 
map ge :tabgroups switch 
map <C-S-e> :tabgroups list<CR>

command rpcontinued javascript rpcontinued.overlay.openToolbarPopup()
command livestreamer -nargs=1 javascript livestreamer(<q-args>)

highlight Hint font-family: sans-serif; font-size: 12px; font-weight: bold;
highlight Hint -append color: black; background-color: white;
highlight Hint -append border-color: ButtonShadow; border-width: 1px;
highlight Hint -append border-style: solid; padding: 0px 1px 1px 1px;
highlight HintElem background-color: #F8F800;  color: black;
set hintchars=hjklasdfgyuiopqwertnmzxcvb7890123456
" set titlestring=Firefox

autocmd LocationChange http://localhost:8090/ tabdetach
" ignorekeys docs.google.com
autocmd PageLoad http://www.twitch.tv/[a-z0-9_]+ livestreamer source

source! /home/aneesh/.vimperatorrc.local

" vim: set ft=vimperator:
